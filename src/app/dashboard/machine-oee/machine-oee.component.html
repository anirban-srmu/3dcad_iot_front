<div class="machine-home-container">
  <div class="container-fluid">
    <div class="row">
      <!-- LEFT COLUMN -->
      <div class="col-lg-6 d-flex flex-column">
        <div class="card h-100">
          <div class="card-body">
            <!-- <h3 class="card-title text-center">Production Metrics</h3> -->

            <div class="row ">
              <div class="col-md-6  mb-md-0">
                <div class="card  shift-card ">
                  <div class="card-body">
                    <h5 class="card-title">Cycle Time</h5>
                    <div class="d-flex align-items-baseline">
                      <h2 class="display-6 me-2">
                        {{ (data.cycleTime).toFixed(0) }}s
                      </h2>
                      <small class="text-muted">Target: {{ data.targetCycleTime
                        }}s</small>
                    </div>
                    <div class="mt-2">
                      <span class="badge" [class.bg-success]="data.cycleTime <= data.targetCycleTime"
                        [class.bg-warning]="data.cycleTime > data.targetCycleTime">
                        {{ data.cycleTime <= data.targetCycleTime ? 'On Target' : 'Above Target' }} </span>
                    </div>

                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="card shift-card">
                  <div class="card-body">
                    <h5 class="card-title">Parts Quality</h5>
                    <div class="d-flex justify-content-between text-center">
                      <div class="px-2">
                        <div class="text-success fw-bold">{{ data.okParts }}
                        </div>
                        <small>OK </small>
                      </div>
                      <div class="px-2">
                        <div class="text-danger fw-bold">{{ data.nokParts }}
                        </div>
                        <small>NOK </small>
                      </div>
                      <div class="px-2">
                        <div class="text-danger fw-bold">{{ data.nrParts }}
                        </div>
                        <small>NR </small>
                      </div>
                      <div class="px-2">
                        <div class="text-danger fw-bold">{{ data.skParts }}
                        </div>
                        <small>SK </small>
                      </div>
                      <div class="px-2">
                        <div class="text-primary fw-bold">{{ data.totalParts
                          }}
                        </div>
                        <small>Total</small>
                      </div>
                    </div>
                    <div class="quality-rate text-center mt-2">
                      <span class="badge card-custom bg-success">
                        Quality Rate: {{ (data.totalParts > 0 ?
                        (data.okParts / data.totalParts *
                        100) :
                        0).toFixed(1) }}%
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="card shift-card ">
                  <div class="card-body text-center">
                    <h5 class="card-title">Shift A</h5>
                    <div class="d-flex justify-content-between">
                      <div>
                        <div class="text-success">{{ data.shiftA_OK_Parts }}</div>
                        <small>OK</small>
                      </div>
                      <div>
                        <div class="text-danger">{{ data.shiftA_Nok_Parts }}</div>
                        <small>NOK</small>
                      </div>
                      <div>
                        <div class="text-primary">{{ data.shiftA_TotalParts }}</div>
                        <small>Total</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card shift-card">
                  <div class="card-body text-center">
                    <h5 class="card-title">Shift B</h5>
                    <div class="d-flex justify-content-between">
                      <div>
                        <div class="text-success">{{ data.shiftB_OK_Parts }}</div>
                        <small>OK</small>
                      </div>
                      <div>
                        <div class="text-danger">{{ data.shiftB_Nok_Parts }}</div>
                        <small>NOK</small>
                      </div>
                      <div>
                        <div class="text-primary">{{ data.shiftB_TotalParts }}</div>
                        <small>Total</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card shift-card">
                  <div class="card-body text-center">
                    <h5 class="card-title">Shift C</h5>
                    <div class="d-flex justify-content-between">
                      <div>
                        <div class="text-success">{{ data.shiftC_OK_Parts }}</div>
                        <small>OK</small>
                      </div>
                      <div>
                        <div class="text-danger">{{ data.shiftC_Nok_Parts }}</div>
                        <small>NOK</small>
                      </div>
                      <div>
                        <div class="text-primary">{{ data.shiftC_TotalParts }}</div>
                        <small>Total</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div class="col-lg-6 d-flex flex-column">
        <div class="card h-100">
          <div class="card-body h-100 d-flex flex-column">
            <div class="row h-100">
              <!-- Left inner col: Cycle Start/Stop & Alarm -->
              <div class="col-md-6 d-flex flex-column justify-content-between">
                <div class="mb-3">
                  <div class="card shift-card p-2 h-100" [class.bg-success]="data.cycleStartStop"
                    [class.text-white]="data.cycleStartStop">
                    <div class="card-body p-2">
                      <h6 class="card-title text-center mb-2">Cycle Start/Stop</h6>
                      <div class="text-center fs-6 fw-bold">
                        {{ data.cycleStartStop ? 'Cycle Started' : 'Cycle Stopped' }}
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="card shift-card p-2 h-100">
                    <div class="card-body p-2">
                      <div class="alarm-panel">
                        <div class="text-center fw-semibold mb-1">Current Alarm</div>
                        <div class="alert p-1 m-0 text-center" [class.alert-danger]="data.alarmSignals !== 'No Alarms'"
                          [class.alert-success]="data.alarmSignals === 'No Alarms'">
                          {{ alarmmessage }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Right inner col: Chart -->
              <div class="col-md-6">
                <div class="h-100">
                  <div echarts [options]="partsQualityOptions" style="height: 100%; min-height: 300px;"></div>
                </div>
              </div>
            </div> <!-- end row -->
          </div> <!-- end card-body -->
        </div> <!-- end card -->
      </div> <!-- end right col -->
    </div>
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title text-center">Machine Status</h3>
          <div class="status-cards d-flex flex-wrap gap-2 mb-3 justify-content-center">
            <div class="card shift-card1" [class.bg-success]="data.cycleRunning" [class.text-white]="data.cycleRunning">
              <div class="card-body p-2 text-center"> <!-- Reduced padding -->
                <i class="fas fa-play-circle fa-lg"></i> <!-- Use fa-lg for smaller icon -->
                <div class="fs-6">Cycle Running</div> <!-- Shortened name -->
              </div>
            </div>
            <div class="card shift-card1" [class.bg-secondary]="data.idle" [class.text-white]="data.idle">
              <div class="card-body p-2 text-center">
                <i class="fas fa-pause-circle fa-lg"></i>
                <div class="fs-6">Idle</div>
              </div>
            </div>
            <div class="card shift-card1" [class.bg-danger]="data.stopped" [class.text-white]="data.stopped">
              <div class="card-body p-2 text-center">
                <i class="fas fa-stop-circle fa-lg"></i>
                <div class="fs-6"> Stopped (OFF) </div>
              </div>
            </div>
            <div class="card shift-card1" [class.bg-danger]="data.breakdown" [class.text-white]="data.breakdown">
              <div class="card-body p-2 text-center">
                <i class="fas fa-exclamation-triangle fa-lg"></i>
                <div class="fs-6"> Breakdown</div> <!-- Shortened name -->
              </div>
            </div>

            <div class="card shift-card1" [class.bg-warning]="data.maintenanceMode"
              [class.text-dark]="data.maintenanceMode">
              <div class="card-body p-2 text-center">
                <i class="fas fa-tools fa-lg"></i>
                <div class="fs-6">Maintenance Mode</div> <!-- Shortened name -->
              </div>
            </div>
            <div class="card shift-card1" [class.bg-danger]="data.stopped" [class.text-white]="data.stopped">
              <div class="card-body p-2 text-center">
                <i class="fas fa-check  fa-lg"></i>
                <div class="fs-6">Availability Status</div>
              </div>
            </div>
            <div class="card shift-card1" [class.bg-warning]="data.maintenanceMode"
              [class.text-dark]="data.maintenanceMode">
              <div class="card-body p-2 text-center">
                <i class="fas fa-tools fa-lg"></i>
                <div class="fs-6">Plan Downtime Status</div> <!-- Shortened name -->
              </div>
            </div>
            <div class="card shift-card1" [class.bg-warning]="data.maintenanceMode"
              [class.text-dark]="data.maintenanceMode">
              <div class="card-body p-2 text-center">
                <i class="fas fa-tools fa-lg"></i>
                <div class="fs-6">Cycle Start/Stop</div> <!-- Shortened name -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
